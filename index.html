<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Pia</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            overflow-x: auto;
            overflow-y: hidden;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Welcome screen styles */
        #welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 50%, #ffd1ff 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            text-align: center;
            color: white;
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        #welcome-screen.hidden {
            opacity: 0;
            transform: translateY(-100vh);
            pointer-events: none;
        }

        .birthday-title {
            font-size: 4rem;
            margin-bottom: 30px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: sparkle 2s ease-in-out infinite alternate;
        }

        .birthday-subtitle {
            font-size: 1.8rem;
            margin-bottom: 40px;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.5s forwards;
            opacity: 0;
        }

        .character-intro {
            font-size: 1.4rem;
            margin-bottom: 50px;
            max-width: 600px;
            line-height: 1.6;
            animation: fadeInUp 1s ease-out 1s forwards;
            opacity: 0;
        }
        
        .controls-info {
            font-size: 1.2rem;
            margin-top: 20px;
            padding: 10px 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            animation: fadeInUp 1s ease-out 2s forwards;
            opacity: 0;
        }

        .start-button {
            padding: 20px 40px;
            font-size: 1.3rem;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            animation: fadeInUp 1s ease-out 1.5s forwards;
            opacity: 0;
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.4);
            background: linear-gradient(45deg, #ee5a24, #ff6b6b);
        }

        @keyframes sparkle {
            0% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.5); }
            100% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 40px rgba(255,255,255,0.8); }
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        body::-webkit-scrollbar { height: 8px; }
        body::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 4px; }

        #world {
            display: flex;
            width: 800vw; 
            height: 100vh;
            position: relative;
        }

        .scene {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            text-align: center;
            padding: 40px;
            position: relative;
            color: white;
            overflow: hidden;
        }

        /* ==== BACKGROUNDS ==== */
        .scene:nth-child(1) {
            background: linear-gradient(to bottom, #f0e6d2 0%, #f0e6d2 60%, #8d6e63 60%, #795548 100%);
        }
        .scene:nth-child(1)::before {
            content: ''; position: absolute; top: 10%; left: 10%; width: 80%; height: 45%;
            background: #2c5c3c; border: 15px solid #5d4037; border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3); z-index: 1;
        }
        
        .scene:nth-child(2) { background: linear-gradient(to bottom, #141414 70%, #4a148c 100%); }
        .scene:nth-child(2)::before {
            content: ' '; position: absolute; top: 5%; left: 15%; width: 70%; height: 50%;
            background: #e0e0e0; border-radius: 5px; box-shadow: 0 0 30px 10px rgba(255, 255, 255, 0.3);
        }
        .scene:nth-child(2)::after {
            content: ' '; position: absolute; bottom: 0; left: 0; right: 0; height: 30%;
            background-image: repeating-linear-gradient(90deg, #d32f2f 0, #d32f2f 8%, transparent 8%, transparent 10%);
            background-size: 100px 100%;
        }
        
        .scene:nth-child(3), .scene:nth-child(5) {
            background: linear-gradient(to bottom, #0c0a1a, #2c1a3e 70%, #4a4a4a 70%, #3c3c3c 100%);
        }
        .scene:nth-child(3)::before, .scene:nth-child(5)::before {
             content: ' '; position: absolute; top:0; left:0; right:0; bottom:0;
             background-image: radial-gradient(circle, white 1px, transparent 1px);
             background-size: 50px 50px; opacity: 0.5; animation: twinkle 5s infinite linear;
        }
        @keyframes twinkle { from { background-position: 0 0; } to { background-position: -100px 50px; } }
        
        .scene:nth-child(5)::after {
            content: ''; position: absolute; top: 15%; right: 15%; width: 100px; height: 100px;
            background: #f5f3ce; border-radius: 50%;
            box-shadow: 0 0 50px #f5f3ce, 0 0 100px #f5f3ce;
        }
        
        .scene:nth-child(4) {
            background: linear-gradient(to bottom, #87CEEB 0%, #B0E0E6 60%, #2E8B57 60%, #3CB371 100%);
        }
        .scene:nth-child(4)::before { content:''; position: absolute; top:0; left:0; width: 15%; height: 60%; background: #A52A2A; }
        .scene:nth-child(4)::after { content:''; position: absolute; top:0; right:0; width: 15%; height: 60%; background: #A52A2A; }
        
        .scene:nth-child(6) {
            background: linear-gradient(to bottom, #fdf5e6 60%, #8B4513 60%, #A0522D 100%);
        }
        .scene:nth-child(6)::before {
            content: ''; position: absolute; top: 10%; left: 0; right: 0; height: 45%;
            background: repeating-linear-gradient(#D2B48C 0, #D2B48C 10%, #8B4513 10%, #8B4513 12%), repeating-linear-gradient(90deg, #A0522D 0, #A0522D 2%, transparent 2%, transparent 10%);
            background-size: 100% 100px, 100px 100%;
        }

        .scene:nth-child(7) {
             background-color: #E5DDD5;
             background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 200 200'%3E%3Cdefs%3E%3Cg id='a'%3E%3Cpath fill='%23d9d2c5' d='M27.2 113.7c-3-3-3-7.8 0-10.8l83.2-83.2c3-3 7.8-3 10.8 0s3 7.8 0 10.8L38 113.7c-3 3-7.8 3-10.8 0z'/%3E%3Cpath fill='%23e0d8cb' d='M113.7 172.8c-3-3-7.8-3-10.8 0L19.7 89.6c-3-3-3-7.8 0-10.8s7.8-3 10.8 0l83.2 83.2c3 3 3 7.8 0 10.8z'/%3E%3Cpath fill='%23d9d2c5' d='M108.5 108.5c-1.5-1.5-1.5-3.9 0-5.4l49.5-49.5c1.5-1.5 3.9-1.5 5.4 0s1.5 3.9 0 5.4l-49.5 49.5c-1.5 1.5-3.9 1.5-5.4 0z'/%3E%3Cpath fill='%23d4ccc0' d='M158 158c-1.5-1.5-3.9-1.5-5.4 0l-49.5-49.5c-1.5-1.5-1.5-3.9 0-5.4s3.9-1.5 5.4 0l49.5 49.5c1.5 1.5 1.5 3.9 0 5.4z'/%3E%3C/g%3E%3C/defs%3E%3Cuse href='%23a' x='-100' y='-100'/%3E%3Cuse href='%23a' x='-100' y='0'/%3E%3Cuse href='%23a' x='0' y='-100'/%3E%3Cuse href='%23a' x='0' y='0'/%3E%3C/svg%3E");
             color: #121212;
        }
        .scene:nth-child(7) .scene-text { background: #DCF8C6; border-radius: 15px 15px 0 15px; }
        .scene:nth-child(7) h1, .scene:nth-child(7) p { color: #121212; text-shadow: none; }

        .scene:nth-child(8) {
            background-color: #ffc0cb; overflow: hidden;
        }
        .heart {
            position: absolute; background-color: red; width: 30px; height: 30px;
            transform: rotate(-45deg); animation: float-heart 10s infinite;
        }
        .heart::before, .heart::after {
            content: ''; position: absolute; background-color: red;
            width: 30px; height: 30px; border-radius: 50%;
        }
        .heart::before { top: -15px; left: 0; }
        .heart::after { top: 0; left: 15px; }
        @keyframes float-heart {
            0% { bottom: -10%; opacity: 1; transform: rotate(-45deg) scale(1); }
            100% { bottom: 110%; opacity: 0; transform: rotate(-45deg) scale(1.5); }
        }

        /* ==== IMAGE PLACEHOLDER STYLES ==== */
        .image-placeholder {
            position: absolute;
            width: 220px;
            height: 180px;
            background-color: #fff;
            padding: 12px;
            border-radius: 3px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
            z-index: 101;
        }
        .image-placeholder img {
            width: 100%; height: 100%; object-fit: cover;
            object-position: center;
            display: block;
        }
        .image-placeholder::before {
            content: ''; position: absolute; top: -10px; left: 50%;
            transform: translateX(-50%); width: 80px; height: 25px;
            background: rgba(255, 255, 0, 0.4);
            border-left: 1px dashed rgba(0,0,0,0.2); border-right: 1px dashed rgba(0,0,0,0.2);
        }
        
        .ph-ch1 { top: 12%; right: 5%; transform: rotate(7deg); }
        .ph-ch2 { top: 10%; left: 5%; transform: rotate(-6deg); }
        .ph-ch3 { top: 10%; right: 5%; transform: rotate(5deg); }
        .ph-ch4 { top: 12%; left: 5%; transform: rotate(-8deg); }
        .ph-ch5 { top: 12%; right: 5%; transform: rotate(7deg); }
        .ph-ch6 { top: 10%; left: 5%; transform: rotate(-6deg); }

        .scene-text {
            position: relative;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            margin: 40px auto 0;
            width: 80%;
            max-width: 800px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .scene h1, .scene p {
            opacity: 0;
            animation: fadeInUp 1s ease-out forwards;
        }
        .scene h1 { font-size: 3.5rem; margin-bottom: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); transform: translateY(30px); }
        .scene p { font-size: 1.4rem; line-height: 1.8; max-width: 600px; margin-bottom: 20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.8); transform: translateY(20px); animation-delay: 0.3s; margin-left: auto; margin-right: auto; }

        #character-me, #character-her {
            position: fixed;
            bottom: 30%;
            transform: translateX(-50%); z-index: 1000;
            width: 200px; height: 200px; display: flex; align-items: center; justify-content: center;
        }
        #character-me { left: 48%; }
        #character-her { left: 52%; }
        .character-sprite { width: 160px; height: 160px; object-fit: contain; filter: drop-shadow(0 8px 16px rgba(0,0,0,0.4)); transition: transform 0.15s ease-out; image-rendering: pixelated; }
        
        .reset-button {
            position: fixed; top: 20px; right: 20px; padding: 10px 20px;
            background: rgba(255,255,255,0.9); border: none; border-radius: 25px;
            cursor: pointer; font-size: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s ease; z-index: 1500; display: none;
        }
        .reset-button:hover { background: white; transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.3); }

        .progress-bar {
            position: fixed; top: 0; left: 0; height: 4px;
            background: rgba(255,255,255,0.8); z-index: 1500;
            transition: width 0.3s ease; display: none;
        }

        @media (max-width: 768px) {
            .birthday-title, .scene h1 { font-size: 2.5rem; }
            .scene p { font-size: 1.1rem; padding: 0 20px; }
            #character-me { left: 46%; } #character-her { left: 54%; }
            .character-sprite { width: 120px; height: 120px; }
            .scene-text { padding: 20px; margin-top: 20px; }
            .image-placeholder { width: 150px; height: 120px; padding: 10px; font-size: 1rem;}
        }
    </style>
</head>
<body>
    <audio id="background-music" loop>
        <source src="heikousen.mp3" type="audio/mpeg">
    </audio>

    <div id="welcome-screen">
        <h1 class="birthday-title">🎂 Happy Birthday My Dear Piaa 🎂</h1>
        <p class="birthday-subtitle">Here's my grand present for you: A special journey through our memories together.</p>
        <div class="character-intro"><p>Today we'll walk through our story together, you and me, side by side.</p></div>
        <p class="controls-info">Use A and D to walk</p>
        <button class="start-button" onclick="startJourney()">Begin Our Walk Together 💕</button>
    </div>

    <div class="progress-bar" id="progress-bar"></div>
    <button class="reset-button" id="reset-button" onclick="resetJourney()">🏠 Kembali ke Awal</button>

    <div id="character-me"><img class="character-sprite" id="character-me-sprite" src="images/me_walk1.png" alt="Me walking" /></div>
    <div id="character-her"><img class="character-sprite" id="character-her-sprite" src="images/her_walk1.png" alt="Her walking" /></div>

    <div id="world">
        <section class="scene">
            <div class="image-placeholder ph-ch1"><img src="class.jpg" alt="Kenangan Kelas"></div>
            <div class="scene-text">
                <h1>Chapter 1: Our Beginning</h1>
                <p>Amidst the classroom buzz, our story began. Although we barely spoke, my admiration for you started in silence. Our conversations truly began to flow during the extra classes for university entrance exams, turning quiet observations into shared thoughts and laughter.</p>
            </div>
        </section>

        <section class="scene">
            <div class="image-placeholder ph-ch2"><img src="bioskop.jpg" alt="Kenangan Bioskop"></div>
            <div class="scene-text">
                <h1>Chapter 2: The Movie Watch Party</h1>
                <p>During an exam break, I gathered my courage and asked you to watch "Suzume" with our friends. I was thrilled when you agreed. Throughout the movie, I found myself stealing glances, hoping for a seat beside you, and watching your reactions to every scene.</p>
            </div>
        </section>

        <section class="scene">
            <div class="image-placeholder ph-ch3"><img src="event1.jpg" alt="Kenangan Rooftop"></div>
            <div class="scene-text">
                <h1>Chapter 3: Our First "Date"</h1>
                <p>This was the first time we texted properly. I asked you to attend an event, just the two of us, and was surprised when you said yes. Under the bright stars, we strolled around, and I felt a profound sense of safety and joy just being by your side. After that night, our texts became more frequent.</p>
            </div>
        </section>
        
        <section class="scene">
            <div class="image-placeholder ph-ch4"><img src="graduation.jpg" alt="Kenangan Wisuda"></div>
            <div class="scene-text">
                <h1>Chapter 4: Graduation Day</h1>
                <p>On our graduation day, I knew I couldn't miss the chance to make it special. I gave you a bouquet of flowers, a moment my dad witnessed. He told my mom about it, and for the first time, my parents knew about the girl who meant so much to me.</p>
            </div>
        </section>

        <section class="scene">
            <div class="scene-text">
                <h1>Chapter 5: A Confession Under the Moon</h1>
                <p>When you told me you were accepted to UNEJ, I thought it might be the last time I'd see you. As you were about to board the bus, I nervously confessed my feelings—not to ask you to be mine, but simply to let you know how much you meant to me.</p>
            </div>
        </section>

        <section class="scene">
            <div class="image-placeholder ph-ch6"><img src="gramed.jpg" alt="Kenangan Perpustakaan"></div>
            <div class="scene-text">
                <h1>Chapter 6: Between The Bookshelves</h1>
                <p>Even though we were far apart, our story continued. We went on a "date" at Gramedia, and I bought you a book. It was a simple gesture, but it felt like another chapter in our shared adventure, finding worlds together even when we were worlds apart.</p>
            </div>
        </section>

        <section class="scene">
            <div class="scene-text">
                <h1>Chapter 7: Close at Heart</h1>
                <p>Separated by distance, our connection only grew stronger. I decided to open up and confess to you for the second time. The moment I realized you felt the same way about me was pure happiness.</p>
            </div>
        </section>
        
        <section class="scene">
            <div id="hearts-container"></div>
            <div class="scene-text">
                <h1>Now & Forever</h1>
                <p>And here we are now. Happy birthday, my love. I hope you are blessed with endless happiness. I hope we continue to love each other until our very last breath, and I hope for a future with you. You are the only one I want. Thank you for coming into my life. <br> - Yours, <br> Bintang. </p>
            </div>
        </section>
    </div>

    <script>
        const world = document.getElementById('world');
        const meWalkingFrames = [ 'images/me_walk1.png', 'images/me_walk2.png', 'images/me_walk3.png', 'images/me_walk4.png' ];
        const herWalkingFrames = [ 'images/her_walk1.png', 'images/her_walk2.png', 'images/her_walk3.png', 'images/her_walk4.png' ];
        let frameIndex = 0, walkInterval, currentPosition = 0;
        let maxScroll = world.scrollWidth - window.innerWidth; 
        const walkSpeed = 4;
        let keysPressed = {};
        const characterMeSprite = document.getElementById('character-me-sprite');
        const characterHerSprite = document.getElementById('character-her-sprite');
        const progressBar = document.getElementById('progress-bar');
        const backgroundMusic = document.getElementById('background-music');
        
        function startJourney() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('reset-button').style.display = 'block';
            document.getElementById('progress-bar').style.display = 'block';
            maxScroll = world.scrollWidth - window.innerWidth;
            
            if (backgroundMusic) {
                backgroundMusic.currentTime = 0; // Memastikan lagu mulai dari awal
                backgroundMusic.volume = 0.4;
                const playPromise = backgroundMusic.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Autoplay was prevented. Waiting for another user click to play audio.");
                        document.body.addEventListener('click', () => backgroundMusic.play(), { once: true });
                    });
                }
            }

            setTimeout(() => { document.getElementById('welcome-screen').style.display = 'none'; }, 1000);
            createHearts();
        }

        function createHearts() {
            const container = document.querySelector('.scene:nth-child(8)');
            if (!container) return;
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = Math.random() * 5 + 5 + 's';
                heart.style.transform = `rotate(-45deg) scale(${Math.random() * 0.5 + 0.5})`;
                container.appendChild(heart);
                setTimeout(() => { heart.remove(); }, 10000);
            }, 500);
        }

        function startWalkingAnimation() {
            if (walkInterval) return;
            walkInterval = setInterval(() => {
                frameIndex = (frameIndex + 1) % 4;
                characterMeSprite.src = meWalkingFrames[frameIndex];
                characterHerSprite.src = herWalkingFrames[frameIndex];
                const bounce = 'translateY(-4px)', normal = 'translateY(0)';
                if (frameIndex === 1 || frameIndex === 3) { characterMeSprite.style.transform = bounce; characterHerSprite.style.transform = bounce; } 
                else { characterMeSprite.style.transform = normal; characterHerSprite.style.transform = normal; }
            }, 150);
        }
        function stopWalkingAnimation() {
            clearInterval(walkInterval); walkInterval = null; frameIndex = 0; 
            characterMeSprite.src = meWalkingFrames[frameIndex]; characterHerSprite.src = herWalkingFrames[frameIndex];
            characterMeSprite.style.transform = 'translateY(0)'; characterHerSprite.style.transform = 'translateY(0)';
        }

        function move() {
            if (keysPressed['d']) { currentPosition = Math.min(currentPosition + walkSpeed, maxScroll); }
            if (keysPressed['a']) { currentPosition = Math.max(currentPosition - walkSpeed, 0); }
            window.scrollTo(currentPosition, 0);
            updateProgress();
            if (keysPressed['d'] || keysPressed['a']) { requestAnimationFrame(move); }
        }
        
        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase();
            if (key === 'a' || key === 'd') {
                if (!keysPressed[key]) { keysPressed[key] = true; startWalkingAnimation(); requestAnimationFrame(move); }
            }
        });
        
        document.addEventListener('keyup', (event) => {
            const key = event.key.toLowerCase();
            if (key === 'a' || key === 'd') {
                keysPressed[key] = false;
                if (!keysPressed['a'] && !keysPressed['d']) { stopWalkingAnimation(); }
            }
        });
        function updateProgress() { progressBar.style.width = Math.min((currentPosition / maxScroll) * 100, 100) + '%'; }
        function resetJourney() {
            currentPosition = 0; window.scrollTo(0, 0); updateProgress(); if(walkInterval) stopWalkingAnimation();
        }
        window.addEventListener('scroll', () => { currentPosition = window.scrollX; updateProgress(); });
        function createCharacterPlaceholder(canvas, isFemale = false) {
            const ctx = canvas.getContext('2d'); ctx.imageSmoothingEnabled = false; const w = canvas.width, h = canvas.height; ctx.clearRect(0, 0, w, h);
            const skinColor = '#f2d3b1', hairColor = isFemale ? '#6d4c41' : '#3e2723', shirtColor = isFemale ? '#ff80ab' : '#4fc3f7', pantsColor = isFemale ? '#7e57c2' : '#5c6bc0', shoeColor = '#8d6e63', scale = 4, offsetX = w / 2, offsetY = 20;
            const drawPixelRect = (x, y, w, h, color) => { ctx.fillStyle = color; ctx.fillRect(Math.floor(x), Math.floor(y), Math.floor(w), Math.floor(h)); };
            const walkCycle = frameIndex % 4; let legOffset1 = 0, legOffset2 = 0, armSwing = 0; let bodyBounce = (walkCycle === 1 || walkCycle === 3) ? -1 * scale : 0;
            if (walkCycle === 1) { legOffset1 = 2 * scale; legOffset2 = -2 * scale; armSwing = 1 * scale; }
            if (walkCycle === 3) { legOffset1 = -2 * scale; legOffset2 = 2 * scale; armSwing = -1 * scale; }
            const currentOffsetY = offsetY + bodyBounce;
            drawPixelRect(offsetX - 5 * scale, currentOffsetY, 10 * scale, 10 * scale, skinColor); drawPixelRect(offsetX - 4 * scale, currentOffsetY - 1 * scale, 8 * scale, 1 * scale, skinColor); drawPixelRect(offsetX - 4 * scale, currentOffsetY + 10 * scale, 8 * scale, 1 * scale, skinColor);
            drawPixelRect(offsetX - 5 * scale, currentOffsetY - 3 * scale, 10 * scale, 4 * scale, hairColor); drawPixelRect(offsetX - 4 * scale, currentOffsetY - 4 * scale, 8 * scale, 1 * scale, hairColor);
            if (isFemale) { drawPixelRect(offsetX + 5 * scale, currentOffsetY + 3 * scale, 2 * scale, 8 * scale, hairColor); drawPixelRect(offsetX - 7 * scale, currentOffsetY + 3 * scale, 2 * scale, 8 * scale, hairColor); }
            drawPixelRect(offsetX - 3 * scale, currentOffsetY + 3 * scale, 2 * scale, 2 * scale, '#000'); drawPixelRect(offsetX + 1 * scale, currentOffsetY + 3 * scale, 2 * scale, 2 * scale, '#000');
            drawPixelRect(offsetX - 4 * scale, currentOffsetY + 11 * scale, 8 * scale, 7 * scale, shirtColor); drawPixelRect(offsetX - 4 * scale, currentOffsetY + 18 * scale, 8 * scale, 4 * scale, pantsColor);
            drawPixelRect(offsetX - 4 * scale + legOffset1, currentOffsetY + 22 * scale, 3 * scale, 7 * scale, pantsColor); drawPixelRect(offsetX - 4 * scale + legOffset1, currentOffsetY + 29 * scale, 3 * scale, 2 * scale, shoeColor);
            drawPixelRect(offsetX + 1 * scale + legOffset2, currentOffsetY + 22 * scale, 3 * scale, 7 * scale, pantsColor); drawPixelRect(offsetX + 1 * scale + legOffset2, currentOffsetY + 29 * scale, 3 * scale, 2 * scale, shoeColor);
            if (isFemale) { drawPixelRect(offsetX - 7 * scale, currentOffsetY + 11 * scale, 4 * scale, 3 * scale, shirtColor); drawPixelRect(offsetX - 7 * scale, currentOffsetY + 14 * scale, 3 * scale, 3 * scale, skinColor); drawPixelRect(offsetX + 4 * scale, currentOffsetY + 11 * scale + armSwing, 3 * scale, 6 * scale, skinColor); }
            else { drawPixelRect(offsetX + 3 * scale, currentOffsetY + 11 * scale, 4 * scale, 3 * scale, shirtColor); drawPixelRect(offsetX + 4 * scale, currentOffsetY + 14 * scale, 3 * scale, 3 * scale, skinColor); drawPixelRect(offsetX - 7 * scale, currentOffsetY + 11 * scale - armSwing, 3 * scale, 6 * scale, skinColor); }
        }
        characterMeSprite.addEventListener('error', function() { const c = document.createElement('canvas'); c.width=160; c.height=160; createCharacterPlaceholder(c, false); this.src=c.toDataURL(); });
        characterHerSprite.addEventListener('error', function() { const c = document.createElement('canvas'); c.width=160; c.height=160; createCharacterPlaceholder(c, true); this.src=c.toDataURL(); });
        characterMeSprite.src = meWalkingFrames[0];
        characterHerSprite.src = herWalkingFrames[0];
    </script>
</body>
</html>