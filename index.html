<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Pia</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            overflow-x: auto;
            overflow-y: hidden;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Welcome screen styles */
        #welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 50%, #ffd1ff 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            text-align: center;
            color: white;
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        #welcome-screen.hidden {
            opacity: 0;
            transform: translateY(-100vh);
            pointer-events: none;
        }

        .birthday-title {
            font-size: 4rem;
            margin-bottom: 30px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: sparkle 2s ease-in-out infinite alternate;
        }

        .birthday-subtitle {
            font-size: 1.8rem;
            margin-bottom: 40px;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.5s forwards;
            opacity: 0;
        }

        .character-intro {
            font-size: 1.4rem;
            margin-bottom: 50px;
            max-width: 600px;
            line-height: 1.6;
            animation: fadeInUp 1s ease-out 1s forwards;
            opacity: 0;
        }

        .start-button {
            padding: 20px 40px;
            font-size: 1.3rem;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            animation: fadeInUp 1s ease-out 1.5s forwards;
            opacity: 0;
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.4);
            background: linear-gradient(45deg, #ee5a24, #ff6b6b);
        }

        @keyframes sparkle {
            0% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.5); }
            100% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 40px rgba(255,255,255,0.8); }
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hide scrollbar for cleaner look while maintaining functionality */
        body::-webkit-scrollbar {
            height: 8px;
        }

        body::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }

        body::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
        }

        /* Main scrollable world container */
        #world {
            display: flex;
            width: 400vw; /* 4 scenes √ó 100vw each */
            height: 100vh;
            position: relative;
            transition: transform 0.1s ease-out;
        }

        /* Individual story scenes */
        .scene {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            text-align: center;
            padding: 40px;
            position: relative;
            color: white;
            overflow: hidden;
        }

        /* Scene 1: Park Path Background */
        .scene:nth-child(1) {
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 40%, #90EE90 40%, #228B22 100%);
            position: relative;
        }

        .scene:nth-child(1)::before {
            content: '';
            position: absolute;
            bottom: 30%;
            left: 0;
            right: 0;
            height: 60px;
            background:
                repeating-linear-gradient(
                    90deg,
                    #8B4513 0px,
                    #8B4513 8px,
                    #D2691E 8px,
                    #D2691E 16px
                );
            border-top: 4px solid #654321;
            border-bottom: 4px solid #654321;
        }

        .scene:nth-child(1)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30%;
            background:
                radial-gradient(circle at 20% 80%, #228B22 20px, transparent 21px),
                radial-gradient(circle at 60% 85%, #32CD32 15px, transparent 16px),
                radial-gradient(circle at 80% 75%, #228B22 25px, transparent 26px),
                #90EE90;
            background-size: 80px 80px, 60px 60px, 100px 100px, 100%;
        }

        /* Scene 2: City Street Background */
        .scene:nth-child(2) {
            background: linear-gradient(to bottom, #FFB6C1 0%, #FFB6C1 35%, #D3D3D3 35%, #D3D3D3 100%);
        }

        .scene:nth-child(2)::before {
            content: '';
            position: absolute;
            bottom: 30%;
            left: 0;
            right: 0;
            height: 40px;
            background:
                repeating-linear-gradient(
                    90deg,
                    #696969 0px,
                    #696969 20px,
                    #FFFFFF 20px,
                    #FFFFFF 25px,
                    #696969 25px,
                    #696969 45px
                );
            border-top: 2px solid #2F4F4F;
            border-bottom: 2px solid #2F4F4F;
        }

        .scene:nth-child(2)::after {
            content: '';
            position: absolute;
            top: 35%;
            left: 0;
            right: 0;
            height: 35%;
            background:
                linear-gradient(90deg, #8B8B8B 0px, #8B8B8B 8px, transparent 8px, transparent 12px),
                linear-gradient(90deg, #A0A0A0 0px, #A0A0A0 6px, transparent 6px, transparent 10px),
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    transparent 15px,
                    #2F4F4F 15px,
                    #2F4F4F 17px
                ),
                #D3D3D3;
            background-size: 40px 100%, 30px 100%, 100% 30px, 100%;
        }

        /* Scene 3: Beach Boardwalk Background */
        .scene:nth-child(3) {
            background: linear-gradient(to bottom, #FFE4B5 0%, #FFE4B5 30%, #F4A460 30%, #F4A460 70%, #1E90FF 70%, #1E90FF 100%);
        }

        .scene:nth-child(3)::before {
            content: '';
            position: absolute;
            bottom: 30%;
            left: 0;
            right: 0;
            height: 40px;
            background:
                repeating-linear-gradient(
                    90deg,
                    #8B4513 0px,
                    #8B4513 12px,
                    #D2B48C 12px,
                    #D2B48C 14px,
                    #8B4513 14px,
                    #8B4513 26px
                );
            border-top: 3px solid #654321;
            border-bottom: 3px solid #654321;
        }

        .scene:nth-child(3)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30%;
            background:
                repeating-linear-gradient(
                    45deg,
                    #1E90FF 0px,
                    #1E90FF 8px,
                    #87CEEB 8px,
                    #87CEEB 16px
                ),
                radial-gradient(circle at 30% 60%, #F4A460 8px, transparent 9px),
                radial-gradient(circle at 70% 70%, #F4A460 6px, transparent 7px),
                radial-gradient(circle at 50% 80%, #F4A460 10px, transparent 11px);
            background-size: 32px 32px, 40px 40px, 60px 60px, 50px 50px;
        }

        /* Scene 4: Garden Path Background */
        .scene:nth-child(4) {
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 35%, #FFB6C1 35%, #FFB6C1 100%);
        }

        .scene:nth-child(4)::before {
            content: '';
            position: absolute;
            bottom: 30%;
            left: 0;
            right: 0;
            height: 50px;
            background:
                repeating-linear-gradient(
                    90deg,
                    #C0C0C0 0px,
                    #C0C0C0 10px,
                    #D3D3D3 10px,
                    #D3D3D3 20px
                );
            border-top: 3px solid #A9A9A9;
            border-bottom: 3px solid #A9A9A9;
        }

        .scene:nth-child(4)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30%;
            background:
                radial-gradient(circle at 15% 70%, #FF69B4 12px, transparent 13px),
                radial-gradient(circle at 35% 80%, #FF1493 10px, transparent 11px),
                radial-gradient(circle at 55% 75%, #FFB6C1 14px, transparent 15px),
                radial-gradient(circle at 75% 85%, #FF69B4 11px, transparent 12px),
                radial-gradient(circle at 85% 65%, #FF1493 9px, transparent 10px),
                linear-gradient(to bottom, #90EE90 0%, #228B22 100%);
            background-size: 100px 100px, 80px 80px, 120px 120px, 90px 90px, 70px 70px, 100%;
        }

        /* Text content positioning */
        .scene-text {
            position: relative;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            margin-top: 40px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Scene typography */
        .scene h1 {
            font-size: 3.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease-out forwards;
        }

        .scene p {
            font-size: 1.4rem;
            line-height: 1.8;
            max-width: 600px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease-out 0.3s forwards;
        }

        /* Character containers */
        #character-me {
            position: fixed;
            bottom: 38%;
            left: 46%; /* Dibuat lebih dekat */
            transform: translateX(-50%);
            z-index: 1000;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #character-her {
            position: fixed;
            bottom: 38%;
            left: 54%; /* Dibuat lebih dekat */
            transform: translateX(-50%);
            z-index: 1000;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Character sprite styling */
        .character-sprite {
            width: 160px;
            height: 160px;
            object-fit: contain;
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.4));
            transition: transform 0.15s ease-out;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        /* Hand holding connection */
        #hand-connection {
            position: fixed;
            bottom: 48%; /* Disesuaikan dengan posisi tangan karakter */
            left: 50%;
            transform: translateX(-50%);
            width: 20px; /* Lebar dari 'gandengan tangan' */
            height: 10px; /* Tinggi dari 'gandengan tangan' */
            z-index: 1001; /* Di atas karakter */
            background-color: #FFDBAC; /* Warna kulit */
            border: 2px solid #8B4513; /* Outline */
            border-radius: 5px;
            transition: transform 0.1s ease-out;
            opacity: 0; /* Awalnya disembunyikan */
        }


        /* Auto-scroll controls */
        .controls {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1500;
            display: none;
        }

        .control-button {
            padding: 12px 24px;
            margin: 5px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }

        .control-button.active {
            background: #4CAF50;
            color: white;
        }

        /* Progress indicator */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: rgba(255,255,255,0.8);
            z-index: 1500;
            transition: width 0.3s ease;
            display: none;
        }

        /* Pixel art decorative elements */
        .pixel-cloud {
            position: absolute;
            background: white;
            opacity: 0.8;
        }

        .scene:nth-child(1) .pixel-cloud:nth-child(1) {
            top: 15%;
            left: 20%;
            width: 60px;
            height: 20px;
            border-radius: 20px;
            animation: float 4s ease-in-out infinite;
        }

        .scene:nth-child(1) .pixel-cloud:nth-child(2) {
            top: 10%;
            right: 30%;
            width: 80px;
            height: 25px;
            border-radius: 25px;
            animation: float 5s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .birthday-title {
                font-size: 2.5rem;
            }

            .scene h1 {
                font-size: 2.5rem;
            }

            .scene p {
                font-size: 1.1rem;
                padding: 0 20px;
            }

            #character-me {
                bottom: 35%;
                left: 42%;
            }

            #character-her {
                bottom: 35%;
                left: 58%;
            }

            .character-sprite {
                width: 120px;
                height: 120px;
            }

            .scene-text {
                padding: 20px;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div id="welcome-screen">
        <h1 class="birthday-title">üéâ Happy Birthday! üéÇ</h1>
        <p class="birthday-subtitle">A special journey through our memories together</p>
        <div class="character-intro">
            <p>Today we'll walk through our story together - you and me, side by side.</p>
            <p>Two characters, one beautiful journey of friendship and love.</p>
        </div>
        <button class="start-button" onclick="startJourney()">Begin Our Walk Together üíï</button>
    </div>

    <div class="progress-bar" id="progress-bar"></div>

    <div class="controls" id="controls">
        <button class="control-button" onclick="toggleAutoWalk(event)">‚ñ∂Ô∏è Start Walking</button>
        <button class="control-button" onclick="resetJourney()">üè† Back to Start</button>
    </div>

    <div id="hand-connection"></div>

    <div id="character-me">
        <img class="character-sprite" id="character-me-sprite" src="images/me_walk1.png" alt="Me walking" />
    </div>

    <div id="character-her">
        <img class="character-sprite" id="character-her-sprite" src="images/her_walk1.png" alt="Her walking" />
    </div>

    <div id="world">
        <section class="scene">
            <div class="pixel-cloud"></div>
            <div class="pixel-cloud"></div>
            <div class="scene-text">
                <h1>Chapter 1: When We First Met</h1>
                <p>Every great story starts with a single moment - the day our paths crossed and two lives became beautifully intertwined.</p>
                <p>From strangers to friends, we began this incredible journey together, not knowing how much joy lay ahead.</p>
            </div>
        </section>

        <section class="scene">
            <div class="scene-text">
                <h1>Chapter 2: Adventures & Laughter</h1>
                <p>Through seasons of joy and discovery, we walked side by side. Every shared laugh, every adventure, every quiet moment built the foundation of something special.</p>
                <p>Two hearts learning to beat in harmony, creating memories that would last a lifetime.</p>
            </div>
        </section>

        <section class="scene">
            <div class="scene-text">
                <h1>Chapter 3: Stronger Together</h1>
                <p>When storms came, we didn't face them alone. Hand in hand, we weathered every challenge, proving that together we could overcome anything.</p>
                <p>In the difficult moments, we discovered the true strength of our bond and the beauty of unconditional support.</p>
            </div>
        </section>

        <section class="scene">
            <div class="scene-text">
                <h1>Chapter 4: Today & Forever</h1>
                <p>And here we are today, celebrating not just your birthday, but the incredible person you are and the amazing journey we continue to share.</p>
                <p>Happy Birthday! Here's to many more adventures together, walking through life side by side. üéÇ‚ú®</p>
            </div>
        </section>
    </div>

    <script>
        // Character walking animation frames
        const meWalkingFrames = [
            'images/me_walk1.png',
            'images/me_walk2.png',
            'images/me_walk3.png',
            'images/me_walk4.png'
        ];

        const herWalkingFrames = [
            'images/her_walk1.png',
            'images/her_walk2.png',
            'images/her_walk3.png',
            'images/her_walk4.png'
        ];

        let frameIndex = 0;
        let isAutoWalking = false;
        let autoWalkInterval;
        let currentPosition = 0;
        const maxScroll = window.innerWidth * 3; // 4 scenes - 1

        const characterMeSprite = document.getElementById('character-me-sprite');
        const characterHerSprite = document.getElementById('character-her-sprite');
        const world = document.getElementById('world');
        const progressBar = document.getElementById('progress-bar');
        const handConnection = document.getElementById('hand-connection');

        // Start the journey (hide welcome screen)
        function startJourney() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('controls').style.display = 'block';
            document.getElementById('progress-bar').style.display = 'block';

            setTimeout(() => {
                document.getElementById('welcome-screen').style.display = 'none';
            }, 1000);
        }

        // Auto-walking function
        function toggleAutoWalk(event) {
            const button = event ? event.target : document.querySelector('.control-button');

            if (!isAutoWalking) {
                // Start auto-walking
                isAutoWalking = true;
                button.textContent = '‚è∏Ô∏è Pause Walking';
                button.classList.add('active');
                handConnection.style.opacity = 1; // Tampilkan gandengan tangan

                autoWalkInterval = setInterval(() => {
                    if (currentPosition < maxScroll) {
                        currentPosition += 3; // Walking speed
                        window.scrollTo(currentPosition, 0);

                        // Update walking animation
                        updateWalkingAnimation();

                        // Update progress
                        updateProgress();
                    } else {
                        // Reached the end
                        toggleAutoWalk();
                    }
                }, 150); // Kecepatan interval diubah agar animasi lebih terlihat

            } else {
                // Stop auto-walking
                isAutoWalking = false;
                button.textContent = '‚ñ∂Ô∏è Start Walking';
                button.classList.remove('active');
                clearInterval(autoWalkInterval);
                handConnection.style.opacity = 0; // Sembunyikan gandengan tangan
            }
        }

        // Update walking animation for both characters
        function updateWalkingAnimation() {
            frameIndex = (frameIndex + 1) % 4;

            // Update both characters
            characterMeSprite.src = meWalkingFrames[frameIndex];
            characterHerSprite.src = herWalkingFrames[frameIndex];

            // Add walking bounce effect with hand connection animation
            const bounce = 'scaleY(1.05) translateY(-3px)';
            characterMeSprite.style.transform = bounce;
            characterHerSprite.style.transform = bounce;
            
            // Animate hand connection
            if (frameIndex === 1 || frameIndex === 3) {
                handConnection.style.transform = 'translateX(-50%) translateY(-2px)';
            } else {
                handConnection.style.transform = 'translateX(-50%) translateY(0px)';
            }

            setTimeout(() => {
                characterMeSprite.style.transform = 'scaleY(1) translateY(0)';
                characterHerSprite.style.transform = 'scaleY(1) translateY(0)';
            }, 100);
        }

        // Update progress bar
        function updateProgress() {
            const progress = (currentPosition / maxScroll) * 100;
            progressBar.style.width = Math.min(progress, 100) + '%';
        }

        // Reset journey
        function resetJourney() {
            if (isAutoWalking) {
                toggleAutoWalk();
            }

            currentPosition = 0;
            window.scrollTo(0, 0);
            frameIndex = 0;
            characterMeSprite.src = meWalkingFrames[0];
            characterHerSprite.src = herWalkingFrames[0];
            updateProgress();
        }

        // Handle manual scroll (update position tracking)
        window.addEventListener('scroll', function() {
            if (!isAutoWalking) {
                currentPosition = window.scrollX;
                updateProgress();
            }
        });

        // Enhanced character placeholders with pixel art style
        function createCharacterPlaceholder(canvas, isFemale = false) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false; // Pixel art style
            const w = canvas.width;
            const h = canvas.height;
            ctx.clearRect(0, 0, w, h);

            // Character colors
            const skinColor = '#f2d3b1';
            const skinShadow = '#e3b990';
            const hairColor = isFemale ? '#6d4c41' : '#3e2723';
            const hairShine = isFemale ? '#8d6e63' : '#5d4037';
            const shirtColor = isFemale ? '#ff80ab' : '#4fc3f7';
            const shirtShadow = isFemale ? '#c5497b' : '#039be5';
            const pantsColor = isFemale ? '#7e57c2' : '#5c6bc0';
            const pantsShadow = isFemale ? '#4d2c91' : '#3949ab';
            const shoeColor = '#8d6e63';
            const shoeShadow = '#5d4037';
            
            const scale = 4;
            const offsetX = w / 2;
            const offsetY = 20;

            const drawPixelRect = (x, y, w, h, color) => {
                ctx.fillStyle = color;
                ctx.fillRect(Math.floor(x), Math.floor(y), Math.floor(w), Math.floor(h));
            };

            // Walking animation state
            const walkCycle = frameIndex % 4;
            let legOffset1 = 0, legOffset2 = 0;
            let armOffset = 0;

            if (walkCycle === 1) { armOffset = 1 * scale; legOffset1 = 2 * scale; legOffset2 = -2 * scale; }
            if (walkCycle === 3) { armOffset = -1 * scale; legOffset1 = -2 * scale; legOffset2 = 2 * scale; }

            // Head
            drawPixelRect(offsetX - 5 * scale, offsetY, 10 * scale, 10 * scale, skinColor);
            drawPixelRect(offsetX - 4 * scale, offsetY - 1 * scale, 8 * scale, 1 * scale, skinColor);
            drawPixelRect(offsetX - 4 * scale, offsetY + 10 * scale, 8 * scale, 1 * scale, skinColor);
            
            // Hair
            drawPixelRect(offsetX - 5 * scale, offsetY - 3 * scale, 10 * scale, 4 * scale, hairColor);
            drawPixelRect(offsetX - 4 * scale, offsetY - 4 * scale, 8 * scale, 1 * scale, hairColor);
            drawPixelRect(offsetX - 6 * scale, offsetY - 2 * scale, 1 * scale, 5 * scale, hairColor);
            drawPixelRect(offsetX + 5 * scale, offsetY - 2 * scale, 1 * scale, 5 * scale, hairColor);
            drawPixelRect(offsetX - 5 * scale, offsetY, 3 * scale, 1 * scale, hairShine); // Shine

            if (isFemale) { // Long hair
                drawPixelRect(offsetX + 5 * scale, offsetY + 3 * scale, 2 * scale, 8 * scale, hairColor);
                drawPixelRect(offsetX - 7 * scale, offsetY + 3 * scale, 2 * scale, 8 * scale, hairColor);
            }
            
            // Eyes
            drawPixelRect(offsetX - 3 * scale, offsetY + 3 * scale, 2 * scale, 2 * scale, '#fff');
            drawPixelRect(offsetX + 1 * scale, offsetY + 3 * scale, 2 * scale, 2 * scale, '#fff');
            drawPixelRect(offsetX - 2 * scale, offsetY + 4 * scale, 1 * scale, 1 * scale, '#000');
            drawPixelRect(offsetX + 2 * scale, offsetY + 4 * scale, 1 * scale, 1 * scale, '#000');

            // Body
            drawPixelRect(offsetX - 4 * scale, offsetY + 11 * scale, 8 * scale, 7 * scale, shirtColor);
            drawPixelRect(offsetX - 4 * scale, offsetY + 17 * scale, 8 * scale, 1 * scale, shirtShadow);
            
            // Arms
            // Right arm (character's right, screen left)
            drawPixelRect(offsetX - 7 * scale, offsetY + 11 * scale - (armOffset > 0 ? armOffset/2 : 0), 3 * scale, 6 * scale + Math.abs(armOffset), skinColor);
            // Left arm (character's left, screen right) - this is the hand-holding arm, keep it more static
            drawPixelRect(offsetX + 4 * scale, offsetY + 11 * scale, 3 * scale, 5 * scale, skinColor);
            drawPixelRect(offsetX + 5 * scale, offsetY + 16 * scale, 1 * scale, 1 * scale, skinShadow);
            
            // Pants
            drawPixelRect(offsetX - 4 * scale, offsetY + 18 * scale, 8 * scale, 4 * scale, pantsColor);

            // Legs
            // Left leg
            drawPixelRect(offsetX - 4 * scale, offsetY + 22 * scale, 3 * scale, 7 * scale, pantsColor);
            drawPixelRect(offsetX - 4 * scale + legOffset1, offsetY + 29 * scale, 3 * scale, 2 * scale, shoeColor);
            // Right leg
            drawPixelRect(offsetX + 1 * scale, offsetY + 22 * scale, 3 * scale, 7 * scale, pantsColor);
            drawPixelRect(offsetX + 1 * scale + legOffset2, offsetY + 29 * scale, 3 * scale, 2 * scale, shoeColor);
        }

        // Handle image loading errors for both characters
        characterMeSprite.addEventListener('error', function() {
            const canvas = document.createElement('canvas');
            canvas.width = 160;
            canvas.height = 160;
            createCharacterPlaceholder(canvas, false); // Male character
            this.src = canvas.toDataURL();
        });

        characterHerSprite.addEventListener('error', function() {
            const canvas = document.createElement('canvas');
            canvas.width = 160;
            canvas.height = 160;
            createCharacterPlaceholder(canvas, true); // Female character
            this.src = canvas.toDataURL();
        });

        // Initialize with first frames
        characterMeSprite.src = meWalkingFrames[0];
        characterHerSprite.src = herWalkingFrames[0];
    </script>
</body>
</html>